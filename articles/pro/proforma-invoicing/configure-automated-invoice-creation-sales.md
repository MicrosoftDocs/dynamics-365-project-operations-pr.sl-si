---
title: Nastavitev samodejnega ustvarjanja računov
description: Ta tema vsebuje informacije o nastavitvi in konfiguraciji samodejnega ustvarjanja računov.
author: rumant
ms.date: 04/05/2021
ms.topic: article
ms.reviewer: kfend
ms.author: rumant
ms.openlocfilehash: 2d212f2279b28d900e75d45386e343f95b8e825e
ms.sourcegitcommit: 40f68387f594180af64a5e5c748b6efa188bd300
ms.translationtype: HT
ms.contentlocale: sl-SI
ms.lasthandoff: 05/10/2021
ms.locfileid: "6004191"
---
# <a name="set-up-automatic-invoice-creation"></a><span data-ttu-id="c3a1b-103">Nastavitev samodejnega ustvarjanja računov</span><span class="sxs-lookup"><span data-stu-id="c3a1b-103">Set up automatic invoice creation</span></span> 
 
<span data-ttu-id="c3a1b-104">_**Velja za:** poenostavljeno uvedbo – posel do izstavitve predračuna, Project Operations za primere, ki temeljijo na virih/manjkajoči zalogi_</span><span class="sxs-lookup"><span data-stu-id="c3a1b-104">_**Applies To:** Lite deployment - deal to proforma invoicing, Project Operations for resource/non-stocked based scenarios_</span></span>

<span data-ttu-id="c3a1b-105">V aplikaciji Dynamics 365 Project Operations lahko konfigurirate samodejno ustvarjanje računov.</span><span class="sxs-lookup"><span data-stu-id="c3a1b-105">You can configure automatic invoice creation in Dynamics 365 Project Operations.</span></span> <span data-ttu-id="c3a1b-106">Sistem ustvari osnutek predračuna na podlagi razporeda izdajanja računov za vsako posamezno projektno pogodbo in podrobnost pogodbe.</span><span class="sxs-lookup"><span data-stu-id="c3a1b-106">The system creates a draft proforma invoice based on the invoice schedule for each project contract and contract line.</span></span> <span data-ttu-id="c3a1b-107">Razporedi izdajanja računov so konfigurirani na ravni podrobnosti pogodbe.</span><span class="sxs-lookup"><span data-stu-id="c3a1b-107">Invoice schedules are configured at the contract line level.</span></span> <span data-ttu-id="c3a1b-108">Vsaka podrobnost pogodbe ima lahko različen razpored izdajanja računov ali pa je ta isti razpored izdajanja računov vključen v vsako podrobnost pogodbe.</span><span class="sxs-lookup"><span data-stu-id="c3a1b-108">Each line on a contract can have a distinct invoice schedule, or the same invoice schedule can be included on every line of the contract.</span></span>

<span data-ttu-id="c3a1b-109">Ko ustvarite račun, sistem ustvari vsaj en račun na projektno pogodbo.</span><span class="sxs-lookup"><span data-stu-id="c3a1b-109">When you create an invoice, the system always creates at least one invoice per project contract.</span></span> <span data-ttu-id="c3a1b-110">V nekaterih primerih je lahko ustvarjenih več računov.</span><span class="sxs-lookup"><span data-stu-id="c3a1b-110">In some cases, there may be multiple invoices created.</span></span> <span data-ttu-id="c3a1b-111">Če ima na primer pogodba več strank, bo ustvarjeno toliko računov, kot je strank, ki imajo v tej projektni pogodbi določene plačljive transakcije, za katere je treba izdati račun.</span><span class="sxs-lookup"><span data-stu-id="c3a1b-111">For example, if the contract has multiple customers, the same number of invoices will be created as the number of customers that have billable transactions to invoice on that project contract.</span></span>

## <a name="understand-how-transactions-are-included-on-an-invoice"></a><span data-ttu-id="c3a1b-112">Vključevanje transakcij v račun</span><span class="sxs-lookup"><span data-stu-id="c3a1b-112">Understand how transactions are included on an invoice</span></span> 

<span data-ttu-id="c3a1b-113">Včasih je za vsako podrobnost pogodbe, ki temelji na projektu, določen ločen razpored izdajanja računov.</span><span class="sxs-lookup"><span data-stu-id="c3a1b-113">Sometimes, each project-based contract line specifies a separate invoice schedule.</span></span> <span data-ttu-id="c3a1b-114">Storitve izvajanja pogodbe Adatum imajo na primer naslednje podrobnosti pogodbe:</span><span class="sxs-lookup"><span data-stu-id="c3a1b-114">For example, implementation services for the Adatum contract have the following contract lines:</span></span>

- <span data-ttu-id="c3a1b-115">Prototip dela, ki je element s fiksno cena z dvema ročno ustvarjenima mejnikoma.</span><span class="sxs-lookup"><span data-stu-id="c3a1b-115">Prototype work that is a fixed price with two manually created milestones.</span></span>
- <span data-ttu-id="c3a1b-116">Izvedbena dela, ki vključujejo čas in bodo obračunana vsak drugi ponedeljek.</span><span class="sxs-lookup"><span data-stu-id="c3a1b-116">Implementation work that includes Time and will be billed bi-weekly on Mondays.</span></span>
- <span data-ttu-id="c3a1b-117">Nastali stroški, ki jih je treba obračunati vsak prvi ponedeljek v mesecu.</span><span class="sxs-lookup"><span data-stu-id="c3a1b-117">Expenses incurred that need to be billed monthly on the first Monday of each month.</span></span>

<span data-ttu-id="c3a1b-118">Razporedi izdajanja računov, opredeljeni za vsako od teh dveh postavk vrstice, izgledajo kot je prikazano na naslednji tabeli:</span><span class="sxs-lookup"><span data-stu-id="c3a1b-118">Invoice schedules defined on each of these two line items look like the following table:</span></span>

| <span data-ttu-id="c3a1b-119">Podrobnosti pogodbe</span><span class="sxs-lookup"><span data-stu-id="c3a1b-119">Contract line</span></span> | <span data-ttu-id="c3a1b-120">Datum izdaje računa</span><span class="sxs-lookup"><span data-stu-id="c3a1b-120">Invoice run date</span></span> | <span data-ttu-id="c3a1b-121">Datum prekinitve transakcije</span><span class="sxs-lookup"><span data-stu-id="c3a1b-121">Transaction cut-off date</span></span> | <span data-ttu-id="c3a1b-122">Datum mejnika</span><span class="sxs-lookup"><span data-stu-id="c3a1b-122">Milestone date</span></span> | <span data-ttu-id="c3a1b-123">Znesek mejnika</span><span class="sxs-lookup"><span data-stu-id="c3a1b-123">Milestone amount</span></span> |
| --- | --- | --- | --- | --- |
| <span data-ttu-id="c3a1b-124">Prototip dela</span><span class="sxs-lookup"><span data-stu-id="c3a1b-124">Prototype work</span></span> | <span data-ttu-id="c3a1b-125">5. oktober, ponedeljek</span><span class="sxs-lookup"><span data-stu-id="c3a1b-125">October 5, Monday</span></span> | - | <span data-ttu-id="c3a1b-126">5. oktober, ponedeljek</span><span class="sxs-lookup"><span data-stu-id="c3a1b-126">October 5, Monday</span></span> | <span data-ttu-id="c3a1b-127">5000 USD</span><span class="sxs-lookup"><span data-stu-id="c3a1b-127">5000 USD</span></span> |
| - | <span data-ttu-id="c3a1b-128">3. november, torek</span><span class="sxs-lookup"><span data-stu-id="c3a1b-128">November 3, Tuesday</span></span> | - | <span data-ttu-id="c3a1b-129">3. november, torek</span><span class="sxs-lookup"><span data-stu-id="c3a1b-129">November 3, Tuesday</span></span> | <span data-ttu-id="c3a1b-130">12,000 USD</span><span class="sxs-lookup"><span data-stu-id="c3a1b-130">12,000 USD</span></span> |
| <span data-ttu-id="c3a1b-131">Izvedbeno delo</span><span class="sxs-lookup"><span data-stu-id="c3a1b-131">Implementation work</span></span> | <span data-ttu-id="c3a1b-132">5. oktober, ponedeljek</span><span class="sxs-lookup"><span data-stu-id="c3a1b-132">October 5, Monday</span></span> | <span data-ttu-id="c3a1b-133">4. oktober, nedelja</span><span class="sxs-lookup"><span data-stu-id="c3a1b-133">October 4, Sunday</span></span> | - | - |
| - | <span data-ttu-id="c3a1b-134">19. oktober, ponedeljek</span><span class="sxs-lookup"><span data-stu-id="c3a1b-134">October 19, Monday</span></span> | <span data-ttu-id="c3a1b-135">18. oktober, nedelja</span><span class="sxs-lookup"><span data-stu-id="c3a1b-135">October 18, Sunday</span></span> | - | - |
| - | <span data-ttu-id="c3a1b-136">2. november, ponedeljek</span><span class="sxs-lookup"><span data-stu-id="c3a1b-136">November 2, Monday</span></span> | <span data-ttu-id="c3a1b-137">1. november, nedelja</span><span class="sxs-lookup"><span data-stu-id="c3a1b-137">November 1, Sunday</span></span> | - | - |
| - | <span data-ttu-id="c3a1b-138">16. november, ponedeljek</span><span class="sxs-lookup"><span data-stu-id="c3a1b-138">November 16, Monday</span></span> | <span data-ttu-id="c3a1b-139">15. november, nedelja</span><span class="sxs-lookup"><span data-stu-id="c3a1b-139">November 15, Sunday</span></span> | - | - |
| <span data-ttu-id="c3a1b-140">Nastali stroški</span><span class="sxs-lookup"><span data-stu-id="c3a1b-140">Expenses incurred</span></span> | <span data-ttu-id="c3a1b-141">5. oktober, ponedeljek</span><span class="sxs-lookup"><span data-stu-id="c3a1b-141">October 5, Monday</span></span> | <span data-ttu-id="c3a1b-142">4. oktober, nedelja</span><span class="sxs-lookup"><span data-stu-id="c3a1b-142">October 4, Sunday</span></span> | - | - |
| - | <span data-ttu-id="c3a1b-143">2. november, ponedeljek</span><span class="sxs-lookup"><span data-stu-id="c3a1b-143">November 2, Monday</span></span> | <span data-ttu-id="c3a1b-144">1. november, nedelja</span><span class="sxs-lookup"><span data-stu-id="c3a1b-144">November 1, Sunday</span></span> | - | - |

<span data-ttu-id="c3a1b-145">V primeru se samodejno izdajanje računov izvaja na dan:</span><span class="sxs-lookup"><span data-stu-id="c3a1b-145">In this example when the automatic invoicing runs on:</span></span>

- <span data-ttu-id="c3a1b-146">**4. oktober ali kateri koli datum pred tem** : za to pogodbo ni ustvarjen noben račun, saj tabela za **Razpored izdajanja računov** za nobeno od teh podrobnosti pogodbe nima predvidenega časa »4. oktober, nedelja« kot datuma izdaje računa.</span><span class="sxs-lookup"><span data-stu-id="c3a1b-146">**October 4 or any date before**: No invoice is generated for this contract because the **Invoice Schedule** table for each of these contract lines doesn't call out October 4, Sunday as an invoice run date.</span></span>
- <span data-ttu-id="c3a1b-147">**5. oktober, ponedeljek** : izdan je en račun za:</span><span class="sxs-lookup"><span data-stu-id="c3a1b-147">**October 5 Monday**: One invoice is generated for:</span></span>

    - <span data-ttu-id="c3a1b-148">prototip dela, ki vključuje mejnik, če ima oznako **Pripravljeno na izdajo računa**.</span><span class="sxs-lookup"><span data-stu-id="c3a1b-148">Prototype work that includes the milestone, if it is marked as **Ready to Invoice**.</span></span>
    - <span data-ttu-id="c3a1b-149">Izvedbeno delo, ki vključuje vse časovne transakcije, ustvarjene pred datumom prekinitve transakcije – 4. oktobra, v nedeljo – ki ima oznako **Pripravljeno na izdajo računa**.</span><span class="sxs-lookup"><span data-stu-id="c3a1b-149">Implementation work that includes all Time transactions created before the transaction cut-off date of October 4, Sunday, that is marked as **Ready to Invoice**.</span></span>
    - <span data-ttu-id="c3a1b-150">Nastali strošek, ki vključuje vse stroške, ustvarjene pred datumom prekinitve transakcije – 4. oktobra, v nedeljo – ki ima oznako **Pripravljeno na izdajo računa**.</span><span class="sxs-lookup"><span data-stu-id="c3a1b-150">Expense incurred that includes all Expense transactions created before the transaction cut-off date of October 4, Sunday, that is marked as **Ready to Invoice**.</span></span>
  
- <span data-ttu-id="c3a1b-151">**6. oktober ali kateri koli datum pred 19. oktobrom** : za to pogodbo ni ustvarjen noben račun, saj tabela za **Razpored izdajanja računov** za nobeno od teh podrobnosti pogodbe nima predvidenega časa »6. oktober ali kateri koli datum pred 19. oktobrom« kot datuma izdaje računa.</span><span class="sxs-lookup"><span data-stu-id="c3a1b-151">**On October 6 or any date before October 19**: No invoice is generated for this contract since the **Invoice Schedule** table for each of these contract lines does not call out October 6 or any date before October 19 as an invoice run date.</span></span>
- <span data-ttu-id="c3a1b-152">**19. oktober, ponedeljek**: en račun je izdan za izvedbeno delo, ki vključuje vse časovne transakcije, ustvarjene pred datumom prekinitve transakcije – 18. oktobra, v nedeljo – ki ima oznako **Pripravljeno na izdajo računa**.</span><span class="sxs-lookup"><span data-stu-id="c3a1b-152">**October 19, Monday**: One invoice is generated for implementation work that includes all Time transactions created before the transaction cut-off date of October 18, Sunday, that is marked as **Ready to Invoice**.</span></span>
- <span data-ttu-id="c3a1b-153">**2. november, ponedeljek** : izdan je en račun za:</span><span class="sxs-lookup"><span data-stu-id="c3a1b-153">**November 2 Monday**: One invoice is generated for:</span></span>

    - <span data-ttu-id="c3a1b-154">Izvedbeno delo, ki vključuje vse časovne transakcije, ustvarjene pred datumom prekinitve transakcije – 1. novembra, v nedeljo – ki ima oznako **Pripravljeno na izdajo računa**.</span><span class="sxs-lookup"><span data-stu-id="c3a1b-154">Implementation work that includes all Time transactions created before the transaction cut-off date of November 1, Sunday, that is marked as **Ready to Invoice**.</span></span>
    - <span data-ttu-id="c3a1b-155">Nastali strošek, ki vključuje vse stroške, ustvarjene pred datumom prekinitve transakcije – 1. novembra, v nedeljo – ki ima oznako **Pripravljeno na izdajo računa**.</span><span class="sxs-lookup"><span data-stu-id="c3a1b-155">Expense incurred that includes all Expense transactions created before the transaction cut-off date of November 1, Sunday, that is marked as **Ready to Invoice**.</span></span>

- <span data-ttu-id="c3a1b-156">**3. november, torek** : Za prototipno delo je ustvarjen en račun, ki vključuje mejnik za 12.000 USD, če ima oznako **Pripravljeno na izdajo računa**.</span><span class="sxs-lookup"><span data-stu-id="c3a1b-156">**November 3, Tuesday**: One invoice is generated for prototype work that includes the milestone for 12000 USD, if it is marked as **Ready to Invoice**.</span></span>

## <a name="configure-automatic-invoicing"></a><span data-ttu-id="c3a1b-157">Konfiguracija samodejnega izdajanja računov</span><span class="sxs-lookup"><span data-stu-id="c3a1b-157">Configure automatic invoicing</span></span>

<span data-ttu-id="c3a1b-158">Če želite konfigurirati samodejno izdajanje računov, naredite naslednje.</span><span class="sxs-lookup"><span data-stu-id="c3a1b-158">Complete the following steps to configure an automated invoice run.</span></span>

1. <span data-ttu-id="c3a1b-159">V aplikaciji **Project Operations** odprite razdelek **Nastavitve** > **Nastavitev ponavljajočega se računa**.</span><span class="sxs-lookup"><span data-stu-id="c3a1b-159">In **Project Operations**, go to **Settings** > **Recurring Invoice Setup**.</span></span>
2. <span data-ttu-id="c3a1b-160">Ustvarite paketno opravilo in ga poimenujte **Ustvarjanje računov v aplikaciji Project Operations**.</span><span class="sxs-lookup"><span data-stu-id="c3a1b-160">Create a batch job, and name it **rPoject Operations Create Invoices**.</span></span> <span data-ttu-id="c3a1b-161">Ime paketnega opravila mora vključevati izraz »ustvarjanje računov«.</span><span class="sxs-lookup"><span data-stu-id="c3a1b-161">The name of the batch job must include the words, "create invoices".</span></span>
3. <span data-ttu-id="c3a1b-162">V polju **Vrsta posla** izberite možnost **Brez**.</span><span class="sxs-lookup"><span data-stu-id="c3a1b-162">In the **Job Type** field, select **None**.</span></span> <span data-ttu-id="c3a1b-163">Polji **Pogostost: dnevno** in **Je aktivno** sta privzeto nastavljeni na možnost **Da**.</span><span class="sxs-lookup"><span data-stu-id="c3a1b-163">By default, the **Frequency Daily** and **Is Active** fields are set to **Yes**.</span></span>
4. <span data-ttu-id="c3a1b-164">Izberite **Zaženi potek dela**.</span><span class="sxs-lookup"><span data-stu-id="c3a1b-164">Select **Run Workflow**.</span></span> <span data-ttu-id="c3a1b-165">V pogovornem oknu **Poišči zapis** vidite tri poteke dela:</span><span class="sxs-lookup"><span data-stu-id="c3a1b-165">In the **Look Up Record** dialog box, you will see three workflows:</span></span>

- <span data-ttu-id="c3a1b-166">ProcessRunCaller</span><span class="sxs-lookup"><span data-stu-id="c3a1b-166">ProcessRunCaller</span></span>
- <span data-ttu-id="c3a1b-167">ProcessRunner</span><span class="sxs-lookup"><span data-stu-id="c3a1b-167">ProcessRunner</span></span>
- <span data-ttu-id="c3a1b-168">UpdateRoleUtilization</span><span class="sxs-lookup"><span data-stu-id="c3a1b-168">UpdateRoleUtilization</span></span>

5. <span data-ttu-id="c3a1b-169">Izberite **ProcessRunCaller** in nato **Dodaj**.</span><span class="sxs-lookup"><span data-stu-id="c3a1b-169">Select **ProcessRunCaller**, and then select **Add**.</span></span>
6. <span data-ttu-id="c3a1b-170">V naslednjem pogovornem oknu izberite **V redu**.</span><span class="sxs-lookup"><span data-stu-id="c3a1b-170">In the next dialog box, select **OK**.</span></span> <span data-ttu-id="c3a1b-171">Poteku dela **Spanje** sledi potek dela **Proces**.</span><span class="sxs-lookup"><span data-stu-id="c3a1b-171">A **Sleep** workflow is followed by a **Process** workflow.</span></span> 

> [!NOTE]
> <span data-ttu-id="c3a1b-172">V 5. koraku lahko izberete tudi **ProcessRunner**.</span><span class="sxs-lookup"><span data-stu-id="c3a1b-172">You can also select **ProcessRunner** in step 5.</span></span> <span data-ttu-id="c3a1b-173">Ko nato izberete **V redu**, poteku dela **Proces** sledi potek dela **Spanje**.</span><span class="sxs-lookup"><span data-stu-id="c3a1b-173">Then, when you select **OK**, a **Process** workflow is followed by a **Sleep** workflow.</span></span>

<span data-ttu-id="c3a1b-174">Poteka dela **ProcessRunCaller** in **ProcessRunner** ustvarita račune.</span><span class="sxs-lookup"><span data-stu-id="c3a1b-174">The **ProcessRunCaller** and **ProcessRunner** workflows create invoices.</span></span> <span data-ttu-id="c3a1b-175">**ProcessRunCaller** prikliče **ProcessRunner**.</span><span class="sxs-lookup"><span data-stu-id="c3a1b-175">**ProcessRunCaller** calls **ProcessRunner**.</span></span> <span data-ttu-id="c3a1b-176">**ProcessRunner** je potek dela, ki dejansko ustvari račune.</span><span class="sxs-lookup"><span data-stu-id="c3a1b-176">**ProcessRunner** is the workflow that actually creates the invoices.</span></span> <span data-ttu-id="c3a1b-177">Potek dela zajame vse podrobnosti pogodbe, za katere je treba ustvariti račune, in ustvari račune za te vrstice.</span><span class="sxs-lookup"><span data-stu-id="c3a1b-177">The workflow goes through all the contract lines that invoices must be created for, and creates invoices for those lines.</span></span> <span data-ttu-id="c3a1b-178">Opravilo preveri datume izdaje računa za vrstice pogodbe, da ugotovi, za katere vrstice pogodbe je treba ustvariti račune.</span><span class="sxs-lookup"><span data-stu-id="c3a1b-178">To determine the contract lines that invoices must be created for, the job looks at invoice run dates for the contract lines.</span></span> <span data-ttu-id="c3a1b-179">Če imajo vrstice pogodbe, ki pripadajo eni pogodbi, enak datum izdaje računa, se transakcije združijo v en račun, ki ima dve vrstici računa.</span><span class="sxs-lookup"><span data-stu-id="c3a1b-179">If contract lines that belong to one contract have the same invoice run date, the transactions are combined into one invoice that has two invoice lines.</span></span> <span data-ttu-id="c3a1b-180">Če ni transakcij, za katere je treba ustvariti račun, opravilo preskoči ustvarjanje računa.</span><span class="sxs-lookup"><span data-stu-id="c3a1b-180">If there are no transactions to create invoices for, the job skips creating an invoice.</span></span>

<span data-ttu-id="c3a1b-181">Ko se potek dela **processrunner** preneha izvajati, prikliče potek dela **ProcessRunCaller**, navede končni čas in se zapre.</span><span class="sxs-lookup"><span data-stu-id="c3a1b-181">After **ProcessRunner** has finished running, it calls **ProcessRunCaller**, provides the end time, and is closed.</span></span> <span data-ttu-id="c3a1b-182">Storitev **ProcessRunCaller** nato zažene časovnik, ki začne odštevati 24 ur pred navedenim končnim časom.</span><span class="sxs-lookup"><span data-stu-id="c3a1b-182">**ProcessRunCaller** then starts a timer that runs for 24-hours from the specified end time.</span></span> <span data-ttu-id="c3a1b-183">Ko se časovnik preneha izvajati, se **ProcessRunCaller** zapre.</span><span class="sxs-lookup"><span data-stu-id="c3a1b-183">At the end of the timer, **ProcessRunCaller** is closed.</span></span>

<span data-ttu-id="c3a1b-184">Paketna obdelava za ustvarjanje računov je ponavljajoče se opravilo.</span><span class="sxs-lookup"><span data-stu-id="c3a1b-184">The batch process job for creating invoices is a recurrent job.</span></span> <span data-ttu-id="c3a1b-185">Če je paketna obdelava zagnana večkrat, je ustvarjenih več primerkov opravila, kar povzroči napake.</span><span class="sxs-lookup"><span data-stu-id="c3a1b-185">If this batch process is run many times, multiple instances of the job are created and causes errors.</span></span> <span data-ttu-id="c3a1b-186">Zato paketno obdelavo zaženite samo enkrat, znova jo zaženite le, če se preneha izvajati.</span><span class="sxs-lookup"><span data-stu-id="c3a1b-186">Therefore, you should start the batch process only one time, and then restart only if it stops running.</span></span>

> [!NOTE]
> <span data-ttu-id="c3a1b-187">Paketno izdajanje računov v aplikaciji Project Operations se izvaja samo za podrobnosti pogodbe, ki so konfigurirane z razporedi izdajanja računov.</span><span class="sxs-lookup"><span data-stu-id="c3a1b-187">Batch invoicing in Project Operations only runs for project contract lines that are configured by invoice schedules.</span></span> <span data-ttu-id="c3a1b-188">V podrobnostih pogodbe z načinom obračunavanja s fiksno ceno morajo biti nastavljeni mejniki.</span><span class="sxs-lookup"><span data-stu-id="c3a1b-188">A contract line with a fixed price billing method must have milestones configured.</span></span> <span data-ttu-id="c3a1b-189">V podrobnostih pogodbe z načinom obračunavanja za časovne in materialne transakcije je treba nastaviti datumski urnik računov.</span><span class="sxs-lookup"><span data-stu-id="c3a1b-189">A project contract line with a time and material billing method will need a date-based invoice schedule set up.</span></span>


[!INCLUDE[footer-include](../../includes/footer-banner.md)]
